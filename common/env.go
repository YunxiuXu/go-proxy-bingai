package common

import (
	"os"
	"strings"
)

var (
	// is debug
	IS_DEBUG_MODE bool
	// socks
	SOCKS_URL  string
	SOCKS_USER string
	SOCKS_PWD  string
	// user token
	USER_TOKEN_ENV_NAME_PREFIX = "Go_Proxy_BingAI_USER_TOKEN"
	USER_TOKEN_LIST            []string
	// 访问权限密钥，可选
	AUTH_KEY             string
	AUTH_KEY_COOKIE_NAME = "BingAI_Auth_Key"
)

func init() {
	initEnv()
	initUserToken()
}

func initEnv() {
	// is debug
	IS_DEBUG_MODE = os.Getenv("Go_Proxy_BingAI_Debug") != ""
	// socks
	SOCKS_URL = os.Getenv("Go_Proxy_BingAI_SOCKS_URL")
	SOCKS_USER = os.Getenv("Go_Proxy_BingAI_SOCKS_USER")
	SOCKS_PWD = os.Getenv("Go_Proxy_BingAI_SOCKS_PWD")
	// auth
	AUTH_KEY = "Y6M8W5z9Eh,t7J2F1k0Ls,P9n6N4b5Gc,L1m7V3f8Tq,S0r9X6y4Ie,H8o2K1j3Dw,G5x6U9v4Cz,A4e8B0p3Yq,Q3t5Z6s8Fn,R6d9M1a5Oc,T2g0L7k4Pf,W1i2N5j6Ez,V9u8Y7h0Cs,K0b1Z3c7Rx,E3q7T9p4Jf,X6s8R2t1Ba,C5f7D0l3Oz,I9n6H8m2Kx,U1w2S3y0Vf,O6e9P5r2Nl,B8j0Z3c7Mn,F5t6Q9p4Ae,N1h2L8k6Rs,M7g0E4u9Vx,Z6b1X2c9Sf,Y4q3T5w7On,D9m6H8n1Ki,J7f1L9k2Uz,R5o0P6u2Yx,S3z8N1y7Xc,Y4G2T7k8Rp,N9E6H4b2Sx,U8F6D4t7Bh,L5M2V8g9Np,H6J9F5r2Kx,W9A2Q8e7Zm,S5C3V7t6Gh,R7J9N3m5Xp,E6B9F7h2Kx,P5G3D8n6Mz,Y9L3F5p7Xk,T6C9B5h2Zm,A8V7D6r4Wz,F5G2N9b6Xk,M2J7T4t6Hh,U4P2S6e8Mz,L9K4F7n2Wx,H5R3D7p6Bm,W8C2V4t7Gh,S6J9N3g5Xk,R8F5H2r6Zm,E7M2T8h9Wx,P4B2F5n6Kx,Y8G3D6t7Mz,T5L2N9p6Xk,A9J7F5h2Zm,F6R4D2m5Bp,M3K8T7t9Gx,U7N2S4e5Wz,L4C2V8g6Xk,H9F5H3p6Mz,W6J2N9b7Kx,S8G3T6r4Hh,R6M2D7h5Wx,E8K4F9n2Bm,P5R3N7t6Xk,Y2L9V7e8Zm,T7C2F6r4Mz,A5G3T8g6Kx,F2J7N3b6Wx,M8H5D4p9Xk,U6K4F7h3Zm,L3R2T5t6Bp,H7N9S2e8Gx,W4C2V6g5Mz,S9F5D7n2Kx,R5G3H9r6Xk,E2L8T4h7Zm,P9J7N5t6Wx,Y6K4F2p8Gx,T3R2S5e7Bm,A7N9V2g6Mz,F4C2D6t5Xk,M9H5F7r3Kx,U5G3N8b6Zm,L2J7T4h9Wx,H8R4S6e5Bp,W5K2V8g7Mz,S3F5H9p6Xk,R9D7T2t6Kx,E6N2S5h4Zm,Y4H6F7t5Kp,N8L2D6r9Xk,U9J3T6n2Wx,L5P2V7g6Bm,H7R3S5e9Zm,W6C2F8h7Mz,S9G3N6b2Kx,R8M2D5t7Xk,E6K4J8p5Gh,P7L2N9r6,Wx3333dfakf,4444fjxif,9999frec,5555ofhe,8888kfhn,6666dods"
	//AUTH_KEY = os.Getenv("Go_Proxy_BingAI_AUTH_KEY")
}

func initUserToken() {
	for _, env := range os.Environ() {
		if strings.HasPrefix(env, USER_TOKEN_ENV_NAME_PREFIX) {
			parts := strings.SplitN(env, "=", 2)
			USER_TOKEN_LIST = append(USER_TOKEN_LIST, parts[1])
		}
	}
}
